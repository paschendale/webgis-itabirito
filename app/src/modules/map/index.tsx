import { MapContainer, useMapEvents, WMSTileLayer } from 'react-leaflet'
// import { useMap } from 'react-leaflet/hooks'
import 'leaflet/dist/leaflet.css';
import { useState } from "react"
import SearchBox from '../searchbox';
import InfoPanel from '../info-panel';
import { Container } from './styles';

function Map() {

  var [displayInfoPane,setInfoPaneDisplay] = useState(false)

  var features = [
    {"geometry":null,"id":"rrcm_principal_p.2468","properties":{"Altitude Geom.":843.424,"Altitude Normal":848.634,"Bairro":"Centro","Código":"P-0164","Data Levantamento":"2022-09-01","Data Processamento":"2022-10-24","Desvio Padrão (m)":0.001,"Endereço":"Avenida Queiroz Júnior, Centro, Itabirito, Minas Gerais, 35450-069","Este":625001.677,"Fotografia 01":"DCIM/p0164-2.jpg","Fotografia 02":"DCIM/p0164-1.jpg","Itinerário":"Partindo do edifício da Prefeitura Municipal de Itabirito seguir na direção sul na Avenida Queiroz Júnior em direção à Rua Artur Bernardes por aproximadamente 600 metros.","Latitude":-20.2554648888889,"Longitude":-43.8031388611111,"Métodos de Determinação":"Posicionamento por GNSS","Norte":7759796.488,"Observações":null,"SG de Referência":"SIRGAS 2000","Vértices de Referência":"S-001","datum_altimetrico":"Imbituba-SC","id":2468,"lat_GMS":"-20°15′19,674″","long_GMS":"-43°48′11,300″","responsavel_preenchimento":"Natália","responsavel_tecnico":"Grupo de Engenharia para Gestão Territorial - GENTE UFV","tipo_materializacao":"Chapa metálica incrustada"},"type":"Feature"},
    {"geometry":null,"id":"rrcm_principal_p.2468","properties":{"Altitude Geom.":843.424,"Altitude Normal":848.634,"Bairro":"Centro","Código":"P-0164","Data Levantamento":"2022-09-01","Data Processamento":"2022-10-24","Desvio Padrão (m)":0.001,"Endereço":"Avenida Queiroz Júnior, Centro, Itabirito, Minas Gerais, 35450-069","Este":625001.677,"Fotografia 01":"DCIM/p0164-2.jpg","Fotografia 02":"DCIM/p0164-1.jpg","Itinerário":"Partindo do edifício da Prefeitura Municipal de Itabirito seguir na direção sul na Avenida Queiroz Júnior em direção à Rua Artur Bernardes por aproximadamente 600 metros.","Latitude":-20.2554648888889,"Longitude":-43.8031388611111,"Métodos de Determinação":"Posicionamento por GNSS","Norte":7759796.488,"Observações":null,"SG de Referência":"SIRGAS 2000","Vértices de Referência":"S-001","datum_altimetrico":"Imbituba-SC","id":2468,"lat_GMS":"-20°15′19,674″","long_GMS":"-43°48′11,300″","responsavel_preenchimento":"Natália","responsavel_tecnico":"Grupo de Engenharia para Gestão Territorial - GENTE UFV","tipo_materializacao":"Chapa metálica incrustada"},"type":"Feature"},
    {"geometry":null,"id":"rrcm_principal_p.2468","properties":{"Altitude Geom.":843.424,"Altitude Normal":848.634,"Bairro":"Centro","Código":"P-0164","Data Levantamento":"2022-09-01","Data Processamento":"2022-10-24","Desvio Padrão (m)":0.001,"Endereço":"Avenida Queiroz Júnior, Centro, Itabirito, Minas Gerais, 35450-069","Este":625001.677,"Fotografia 01":"DCIM/p0164-2.jpg","Fotografia 02":"DCIM/p0164-1.jpg","Itinerário":"Partindo do edifício da Prefeitura Municipal de Itabirito seguir na direção sul na Avenida Queiroz Júnior em direção à Rua Artur Bernardes por aproximadamente 600 metros.","Latitude":-20.2554648888889,"Longitude":-43.8031388611111,"Métodos de Determinação":"Posicionamento por GNSS","Norte":7759796.488,"Observações":null,"SG de Referência":"SIRGAS 2000","Vértices de Referência":"S-001","datum_altimetrico":"Imbituba-SC","id":2468,"lat_GMS":"-20°15′19,674″","long_GMS":"-43°48′11,300″","responsavel_preenchimento":"Natália","responsavel_tecnico":"Grupo de Engenharia para Gestão Territorial - GENTE UFV","tipo_materializacao":"Chapa metálica incrustada"},"type":"Feature"},
    {"geometry":null,"id":"rrcm_principal_p.2468","properties":{"Altitude Geom.":843.424,"Altitude Normal":848.634,"Bairro":"Centro","Código":"P-0164","Data Levantamento":"2022-09-01","Data Processamento":"2022-10-24","Desvio Padrão (m)":0.001,"Endereço":"Avenida Queiroz Júnior, Centro, Itabirito, Minas Gerais, 35450-069","Este":625001.677,"Fotografia 01":"DCIM/p0164-2.jpg","Fotografia 02":"DCIM/p0164-1.jpg","Itinerário":"Partindo do edifício da Prefeitura Municipal de Itabirito seguir na direção sul na Avenida Queiroz Júnior em direção à Rua Artur Bernardes por aproximadamente 600 metros.","Latitude":-20.2554648888889,"Longitude":-43.8031388611111,"Métodos de Determinação":"Posicionamento por GNSS","Norte":7759796.488,"Observações":null,"SG de Referência":"SIRGAS 2000","Vértices de Referência":"S-001","datum_altimetrico":"Imbituba-SC","id":2468,"lat_GMS":"-20°15′19,674″","long_GMS":"-43°48′11,300″","responsavel_preenchimento":"Natália","responsavel_tecnico":"Grupo de Engenharia para Gestão Territorial - GENTE UFV","tipo_materializacao":"Chapa metálica incrustada"},"type":"Feature"},
    {"geometry":null,"id":"rrcm_principal_p.2468","properties":{"Altitude Geom.":843.424,"Altitude Normal":848.634,"Bairro":"Centro","Código":"P-0164","Data Levantamento":"2022-09-01","Data Processamento":"2022-10-24","Desvio Padrão (m)":0.001,"Endereço":"Avenida Queiroz Júnior, Centro, Itabirito, Minas Gerais, 35450-069","Este":625001.677,"Fotografia 01":"DCIM/p0164-2.jpg","Fotografia 02":"DCIM/p0164-1.jpg","Itinerário":"Partindo do edifício da Prefeitura Municipal de Itabirito seguir na direção sul na Avenida Queiroz Júnior em direção à Rua Artur Bernardes por aproximadamente 600 metros.","Latitude":-20.2554648888889,"Longitude":-43.8031388611111,"Métodos de Determinação":"Posicionamento por GNSS","Norte":7759796.488,"Observações":null,"SG de Referência":"SIRGAS 2000","Vértices de Referência":"S-001","datum_altimetrico":"Imbituba-SC","id":2468,"lat_GMS":"-20°15′19,674″","long_GMS":"-43°48′11,300″","responsavel_preenchimento":"Natália","responsavel_tecnico":"Grupo de Engenharia para Gestão Territorial - GENTE UFV","tipo_materializacao":"Chapa metálica incrustada"},"type":"Feature"},
    {"geometry":null,"id":"rrcm_principal_p.2468","properties":{"Altitude Geom.":843.424,"Altitude Normal":848.634,"Bairro":"Centro","Código":"P-0164","Data Levantamento":"2022-09-01","Data Processamento":"2022-10-24","Desvio Padrão (m)":0.001,"Endereço":"Avenida Queiroz Júnior, Centro, Itabirito, Minas Gerais, 35450-069","Este":625001.677,"Fotografia 01":"DCIM/p0164-2.jpg","Fotografia 02":"DCIM/p0164-1.jpg","Itinerário":"Partindo do edifício da Prefeitura Municipal de Itabirito seguir na direção sul na Avenida Queiroz Júnior em direção à Rua Artur Bernardes por aproximadamente 600 metros.","Latitude":-20.2554648888889,"Longitude":-43.8031388611111,"Métodos de Determinação":"Posicionamento por GNSS","Norte":7759796.488,"Observações":null,"SG de Referência":"SIRGAS 2000","Vértices de Referência":"S-001","datum_altimetrico":"Imbituba-SC","id":2468,"lat_GMS":"-20°15′19,674″","long_GMS":"-43°48′11,300″","responsavel_preenchimento":"Natália","responsavel_tecnico":"Grupo de Engenharia para Gestão Territorial - GENTE UFV","tipo_materializacao":"Chapa metálica incrustada"},"type":"Feature"},
    {"geometry":null,"id":"rrcm_principal_p.2468","properties":{"Altitude Geom.":843.424,"Altitude Normal":848.634,"Bairro":"Centro","Código":"P-0164","Data Levantamento":"2022-09-01","Data Processamento":"2022-10-24","Desvio Padrão (m)":0.001,"Endereço":"Avenida Queiroz Júnior, Centro, Itabirito, Minas Gerais, 35450-069","Este":625001.677,"Fotografia 01":"DCIM/p0164-2.jpg","Fotografia 02":"DCIM/p0164-1.jpg","Itinerário":"Partindo do edifício da Prefeitura Municipal de Itabirito seguir na direção sul na Avenida Queiroz Júnior em direção à Rua Artur Bernardes por aproximadamente 600 metros.","Latitude":-20.2554648888889,"Longitude":-43.8031388611111,"Métodos de Determinação":"Posicionamento por GNSS","Norte":7759796.488,"Observações":null,"SG de Referência":"SIRGAS 2000","Vértices de Referência":"S-001","datum_altimetrico":"Imbituba-SC","id":2468,"lat_GMS":"-20°15′19,674″","long_GMS":"-43°48′11,300″","responsavel_preenchimento":"Natália","responsavel_tecnico":"Grupo de Engenharia para Gestão Territorial - GENTE UFV","tipo_materializacao":"Chapa metálica incrustada"},"type":"Feature"},
    {"geometry":null,"id":"rrcm_principal_p.2468","properties":{"Altitude Geom.":843.424,"Altitude Normal":848.634,"Bairro":"Centro","Código":"P-0164","Data Levantamento":"2022-09-01","Data Processamento":"2022-10-24","Desvio Padrão (m)":0.001,"Endereço":"Avenida Queiroz Júnior, Centro, Itabirito, Minas Gerais, 35450-069","Este":625001.677,"Fotografia 01":"DCIM/p0164-2.jpg","Fotografia 02":"DCIM/p0164-1.jpg","Itinerário":"Partindo do edifício da Prefeitura Municipal de Itabirito seguir na direção sul na Avenida Queiroz Júnior em direção à Rua Artur Bernardes por aproximadamente 600 metros.","Latitude":-20.2554648888889,"Longitude":-43.8031388611111,"Métodos de Determinação":"Posicionamento por GNSS","Norte":7759796.488,"Observações":null,"SG de Referência":"SIRGAS 2000","Vértices de Referência":"S-001","datum_altimetrico":"Imbituba-SC","id":2468,"lat_GMS":"-20°15′19,674″","long_GMS":"-43°48′11,300″","responsavel_preenchimento":"Natália","responsavel_tecnico":"Grupo de Engenharia para Gestão Territorial - GENTE UFV","tipo_materializacao":"Chapa metálica incrustada"},"type":"Feature"},
    {"geometry":null,"id":"rrcm_principal_p.2468","properties":{"Altitude Geom.":843.424,"Altitude Normal":848.634,"Bairro":"Centro","Código":"P-0164","Data Levantamento":"2022-09-01","Data Processamento":"2022-10-24","Desvio Padrão (m)":0.001,"Endereço":"Avenida Queiroz Júnior, Centro, Itabirito, Minas Gerais, 35450-069","Este":625001.677,"Fotografia 01":"DCIM/p0164-2.jpg","Fotografia 02":"DCIM/p0164-1.jpg","Itinerário":"Partindo do edifício da Prefeitura Municipal de Itabirito seguir na direção sul na Avenida Queiroz Júnior em direção à Rua Artur Bernardes por aproximadamente 600 metros.","Latitude":-20.2554648888889,"Longitude":-43.8031388611111,"Métodos de Determinação":"Posicionamento por GNSS","Norte":7759796.488,"Observações":null,"SG de Referência":"SIRGAS 2000","Vértices de Referência":"S-001","datum_altimetrico":"Imbituba-SC","id":2468,"lat_GMS":"-20°15′19,674″","long_GMS":"-43°48′11,300″","responsavel_preenchimento":"Natália","responsavel_tecnico":"Grupo de Engenharia para Gestão Territorial - GENTE UFV","tipo_materializacao":"Chapa metálica incrustada"},"type":"Feature"},
    {"geometry":null,"id":"rrcm_principal_p.2468","properties":{"Altitude Geom.":843.424,"Altitude Normal":848.634,"Bairro":"Centro","Código":"P-0164","Data Levantamento":"2022-09-01","Data Processamento":"2022-10-24","Desvio Padrão (m)":0.001,"Endereço":"Avenida Queiroz Júnior, Centro, Itabirito, Minas Gerais, 35450-069","Este":625001.677,"Fotografia 01":"DCIM/p0164-2.jpg","Fotografia 02":"DCIM/p0164-1.jpg","Itinerário":"Partindo do edifício da Prefeitura Municipal de Itabirito seguir na direção sul na Avenida Queiroz Júnior em direção à Rua Artur Bernardes por aproximadamente 600 metros.","Latitude":-20.2554648888889,"Longitude":-43.8031388611111,"Métodos de Determinação":"Posicionamento por GNSS","Norte":7759796.488,"Observações":null,"SG de Referência":"SIRGAS 2000","Vértices de Referência":"S-001","datum_altimetrico":"Imbituba-SC","id":2468,"lat_GMS":"-20°15′19,674″","long_GMS":"-43°48′11,300″","responsavel_preenchimento":"Natália","responsavel_tecnico":"Grupo de Engenharia para Gestão Territorial - GENTE UFV","tipo_materializacao":"Chapa metálica incrustada"},"type":"Feature"},
    {"geometry":null,"id":"rrcm_principal_p.2468","properties":{"Altitude Geom.":843.424,"Altitude Normal":848.634,"Bairro":"Centro","Código":"P-0164","Data Levantamento":"2022-09-01","Data Processamento":"2022-10-24","Desvio Padrão (m)":0.001,"Endereço":"Avenida Queiroz Júnior, Centro, Itabirito, Minas Gerais, 35450-069","Este":625001.677,"Fotografia 01":"DCIM/p0164-2.jpg","Fotografia 02":"DCIM/p0164-1.jpg","Itinerário":"Partindo do edifício da Prefeitura Municipal de Itabirito seguir na direção sul na Avenida Queiroz Júnior em direção à Rua Artur Bernardes por aproximadamente 600 metros.","Latitude":-20.2554648888889,"Longitude":-43.8031388611111,"Métodos de Determinação":"Posicionamento por GNSS","Norte":7759796.488,"Observações":null,"SG de Referência":"SIRGAS 2000","Vértices de Referência":"S-001","datum_altimetrico":"Imbituba-SC","id":2468,"lat_GMS":"-20°15′19,674″","long_GMS":"-43°48′11,300″","responsavel_preenchimento":"Natália","responsavel_tecnico":"Grupo de Engenharia para Gestão Territorial - GENTE UFV","tipo_materializacao":"Chapa metálica incrustada"},"type":"Feature"},
    {"geometry":null,"id":"rrcm_principal_p.2468","properties":{"Altitude Geom.":843.424,"Altitude Normal":848.634,"Bairro":"Centro","Código":"P-0164","Data Levantamento":"2022-09-01","Data Processamento":"2022-10-24","Desvio Padrão (m)":0.001,"Endereço":"Avenida Queiroz Júnior, Centro, Itabirito, Minas Gerais, 35450-069","Este":625001.677,"Fotografia 01":"DCIM/p0164-2.jpg","Fotografia 02":"DCIM/p0164-1.jpg","Itinerário":"Partindo do edifício da Prefeitura Municipal de Itabirito seguir na direção sul na Avenida Queiroz Júnior em direção à Rua Artur Bernardes por aproximadamente 600 metros.","Latitude":-20.2554648888889,"Longitude":-43.8031388611111,"Métodos de Determinação":"Posicionamento por GNSS","Norte":7759796.488,"Observações":null,"SG de Referência":"SIRGAS 2000","Vértices de Referência":"S-001","datum_altimetrico":"Imbituba-SC","id":2468,"lat_GMS":"-20°15′19,674″","long_GMS":"-43°48′11,300″","responsavel_preenchimento":"Natália","responsavel_tecnico":"Grupo de Engenharia para Gestão Territorial - GENTE UFV","tipo_materializacao":"Chapa metálica incrustada"},"type":"Feature"}
  ]

  // function MapFn() {
    
  //   useMapEvents({
  //     click(e) {
  //       console.log(e)
  //       setInfoPaneDisplay(!displayInfoPane)
  //     }
  //   })
  //   return null
  // }

  return ( 
    <Container>
      <MapContainer 
        center={[-20.25554, -43.80376]} 
        zoom={17} 
        scrollWheelZoom={false}
        >        
        <SearchBox/>
        <InfoPanel 
          features={features} 
          display={displayInfoPane}
        />
        <WMSTileLayer
          url={'https://itabirito.genteufv.com.br/server/81885c84ccbee7fb8ac07a67612f5485'}
          layers={'mosaic_maxar_70C8bit3bandscompress'}
          transparent={true}
        />
        <WMSTileLayer
          url={'https://itabirito.genteufv.com.br/server/81885c84ccbee7fb8ac07a67612f5485'}
          layers={'rrcm_superior_p'}
          transparent={true}
          format={'image/png'}
        />
      </MapContainer>
    </Container>
  );
}

export default Map;
